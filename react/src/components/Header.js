import React, { useEffect, useState } from 'react';
import AppBar from '@mui/material/AppBar';
import Box from '@mui/material/Box';
import Toolbar from '@mui/material/Toolbar';
import Typography from '@mui/material/Typography';
import Button from '@mui/material/Button';
import IconButton from '@mui/material/IconButton';
import MenuIcon from '@mui/icons-material/Menu';
import { Outlet, Link, useParams, useRoutes, useLocation } from "react-router-dom";
import { useNavigate } from 'react-router-dom';
import { Services } from '../services/Services';



export function Header({props}) {
  
    const [token, setToken] = useState("");
    const location = useLocation();
    useEffect(() => {

      let route = location.pathname;
      route = route.split("/");

      let tokenData = localStorage.getItem("secure-token");
      setToken(tokenData);
      
      if(location.pathname == "/"){
        setToken("");
      }
      
      
      if(route[1] == "thankyou"){
        setToken("");
      }
      
      if(route[1] == "privacy-policy"){
        setToken("");
      }
    });
    

    return (
      <>
    {token &&      
      
        <Box sx={{ flexGrow: 1 }}>
      <AppBar  position="fixed" color="" sx={{ top: 'auto', bottom: 0, padding:"10px 0px" }}>
        <Toolbar>
          <Typography variant="h6" component="div" sx={{ flexGrow: 1 }} align={"center"}>
            <Link to="/agent" style={{textDecoration:"none",color:"#fff"}}>
              <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="0.5" y="0.500244" width="47" height="47.2462" rx="9.5" fill="white" stroke="black" stroke-linejoin="round"/>
                <path d="M36.9375 24.4418C36.9375 16.5095 30.8137 11.1201 24 11.1201C17.2581 11.1201 11.0625 16.3939 11.0625 24.5285C10.2 25.0198 9.625 25.9445 9.625 27.0137V29.9034C9.625 31.4928 10.9187 32.7932 12.5 32.7932H13.9375V23.9795C13.9375 18.3878 18.4369 13.8654 24 13.8654C29.5631 13.8654 34.0625 18.3878 34.0625 23.9795V34.2381H22.5625V37.1278H34.0625C35.6437 37.1278 36.9375 35.8274 36.9375 34.2381V32.4753C37.7856 32.0274 38.375 31.146 38.375 30.1057V26.7825C38.375 25.7711 37.7856 24.8897 36.9375 24.4418Z" fill="black"/>
                <path d="M19.6875 27.0135C20.4814 27.0135 21.125 26.3666 21.125 25.5687C21.125 24.7707 20.4814 24.1238 19.6875 24.1238C18.8936 24.1238 18.25 24.7707 18.25 25.5687C18.25 26.3666 18.8936 27.0135 19.6875 27.0135Z" fill="black"/>
                <path d="M28.3125 27.0135C29.1064 27.0135 29.75 26.3666 29.75 25.5687C29.75 24.7707 29.1064 24.1238 28.3125 24.1238C27.5186 24.1238 26.875 24.7707 26.875 25.5687C26.875 26.3666 27.5186 27.0135 28.3125 27.0135Z" fill="black"/>
                <path d="M32.625 22.7223C32.2823 20.691 31.2356 18.8471 29.6702 17.517C28.1048 16.1868 26.1217 15.4563 24.0719 15.4546C19.7163 15.4546 15.03 19.0812 15.4038 24.774C17.1764 24.0449 18.742 22.8863 19.961 21.4014C21.18 19.9165 22.0145 18.1515 22.39 16.2637C24.2732 20.0637 28.14 22.6789 32.625 22.7223Z" fill="black"/>
              </svg>
            </Link>
          </Typography>
          <Typography variant="h6" component="div" sx={{ flexGrow: 1 }} align={"center"}>
            <Link to="/booking" style={{textDecoration:"none",color:"#fff"}}>
              <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="0.5" y="0.500244" width="47" height="47.2462" rx="9.5" fill="white" stroke="black" stroke-linejoin="round"/>
                <path d="M9.75 13.3818C9.75 12.4321 10.1253 11.5213 10.7934 10.8498C11.4615 10.1783 12.3677 9.80103 13.3125 9.80103H34.6875C35.6323 9.80103 36.5385 10.1783 37.2066 10.8498C37.8747 11.5213 38.25 12.4321 38.25 13.3818V34.8664C38.25 35.8161 37.8747 36.7269 37.2066 37.3984C36.5385 38.0699 35.6323 38.4472 34.6875 38.4472H13.3125C12.3677 38.4472 11.4615 38.0699 10.7934 37.3984C10.1253 36.7269 9.75 35.8161 9.75 34.8664V13.3818ZM36.4688 16.9626H29.3438V22.3337H36.4688V16.9626ZM36.4688 24.1241H29.3438V29.4953H36.4688V24.1241ZM36.4688 31.2856H29.3438V36.6568H34.6875C35.1599 36.6568 35.613 36.4682 35.947 36.1324C36.2811 35.7966 36.4688 35.3412 36.4688 34.8664V31.2856ZM27.5625 36.6568V31.2856H20.4375V36.6568H27.5625ZM18.6562 36.6568V31.2856H11.5312V34.8664C11.5312 35.3412 11.7189 35.7966 12.053 36.1324C12.387 36.4682 12.8401 36.6568 13.3125 36.6568H18.6562ZM11.5312 29.4953H18.6562V24.1241H11.5312V29.4953ZM11.5312 22.3337H18.6562V16.9626H11.5312V22.3337ZM20.4375 16.9626V22.3337H27.5625V16.9626H20.4375ZM27.5625 24.1241H20.4375V29.4953H27.5625V24.1241Z" fill="black"/>
              </svg>
            </Link>
          </Typography>
          <Typography variant="h6" component="div" sx={{ flexGrow: 1 }} align={"center"}>
            <Link to="/home" style={{textDecoration:"none",color:"#fff"}}>
              <svg width="49" height="50" viewBox="0 0 49 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="1.41309" y="1.40527" width="47" height="47.2462" rx="9.5" fill="white" stroke="black" stroke-linejoin="round"/>
                <path d="M37.4619 24.82L25.6487 14.2412C25.5636 14.1648 25.4626 14.1042 25.3514 14.0629C25.2402 14.0215 25.1209 14.0002 25.0005 14.0002C24.8801 14.0002 24.7609 14.0215 24.6497 14.0629C24.5385 14.1042 24.4374 14.1648 24.3524 14.2412L12.5392 24.82C12.195 25.1284 12 25.5474 12 25.9843C12 26.8916 12.8231 27.6292 13.8355 27.6292H15.0802V35.1778C15.0802 35.6327 15.4903 36.0002 15.998 36.0002H23.165V30.2431H26.3772V36.0002H34.0031C34.5107 36.0002 34.9209 35.6327 34.9209 35.1778V27.6292H36.1656C36.6531 27.6292 37.1206 27.457 37.4648 27.146C38.1789 26.5035 38.1789 25.4625 37.4619 24.82Z" fill="black"/>
              </svg>
            </Link>
          </Typography>
          <Typography variant="h6" component="div" sx={{ flexGrow: 1 }} align={"center"}>
            <Link to="/settings" style={{textDecoration:"none",color:"#fff"}}>
              <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="0.5" y="0.500244" width="47" height="47.2462" rx="9.5" fill="white" stroke="black" stroke-linejoin="round"/>
                <path d="M34.8848 27.1374L33.1577 25.6533C33.2395 25.1498 33.2816 24.6356 33.2816 24.1215C33.2816 23.6073 33.2395 23.0932 33.1577 22.5896L34.8848 21.1055C35.015 20.9934 35.1083 20.8441 35.1521 20.6775C35.1959 20.5108 35.1882 20.3347 35.13 20.1726L35.1063 20.1037C34.6308 18.7681 33.9188 17.5299 33.0048 16.449L32.9573 16.3934C32.8464 16.2623 32.6987 16.1681 32.5334 16.1232C32.3682 16.0782 32.1933 16.0847 32.0318 16.1416L29.8882 16.9075C29.0972 16.2556 28.2139 15.7414 27.2594 15.381L26.8454 13.1283C26.8142 12.9588 26.7324 12.8028 26.6109 12.6812C26.4894 12.5595 26.3339 12.4779 26.1651 12.4472L26.094 12.4339C24.7202 12.1848 23.2753 12.1848 21.9016 12.4339L21.8304 12.4472C21.6616 12.4779 21.5062 12.5595 21.3846 12.6812C21.2631 12.8028 21.1813 12.9588 21.1501 13.1283L20.7335 15.3916C19.7866 15.7521 18.9048 16.266 18.1232 16.9128L15.9637 16.1416C15.8022 16.0842 15.6272 16.0775 15.4619 16.1225C15.2966 16.1675 15.1488 16.262 15.0382 16.3934L14.9907 16.449C14.0778 17.5307 13.3659 18.7686 12.8893 20.1037L12.8655 20.1726C12.7469 20.5039 12.8444 20.8749 13.1107 21.1055L14.8589 22.6055C14.7772 23.1038 14.7376 23.6126 14.7376 24.1188C14.7376 24.6277 14.7772 25.1365 14.8589 25.6321L13.1107 27.1321C12.9805 27.2442 12.8872 27.3935 12.8434 27.5602C12.7996 27.7268 12.8073 27.9029 12.8655 28.065L12.8893 28.1339C13.3665 29.4697 14.0732 30.702 14.9907 31.7886L15.0382 31.8443C15.1491 31.9753 15.2969 32.0695 15.4621 32.1145C15.6273 32.1594 15.8022 32.153 15.9637 32.096L18.1232 31.3248C18.9089 31.9741 19.7869 32.4883 20.7335 32.8461L21.1501 35.1094C21.1813 35.2789 21.2631 35.4348 21.3846 35.5565C21.5062 35.6781 21.6616 35.7598 21.8304 35.7905L21.9016 35.8037C23.2879 36.0542 24.7076 36.0542 26.094 35.8037L26.1651 35.7905C26.3339 35.7598 26.4894 35.6781 26.6109 35.5565C26.7324 35.4348 26.8142 35.2789 26.8454 35.1094L27.2594 32.8567C28.2135 32.4972 29.1018 31.9814 29.8882 31.3301L32.0318 32.096C32.1933 32.1534 32.3683 32.1601 32.5336 32.1151C32.6989 32.0702 32.8467 31.9757 32.9573 31.8443L33.0048 31.7886C33.9224 30.6994 34.629 29.4697 35.1063 28.1339L35.13 28.065C35.2486 27.7391 35.1511 27.368 34.8848 27.1374ZM31.2857 22.9024C31.3516 23.3025 31.3858 23.7133 31.3858 24.1241C31.3858 24.5349 31.3516 24.9457 31.2857 25.3459L31.1116 26.4086L33.0813 28.1021C32.7827 28.7936 32.4058 29.4481 31.958 30.0527L29.5111 29.1808L28.6832 29.8645C28.053 30.384 27.3517 30.7921 26.5923 31.0784L25.5877 31.4573L25.1157 34.0281C24.371 34.1129 23.6192 34.1129 22.8745 34.0281L22.4025 31.452L21.4059 31.0678C20.6544 30.7815 19.9557 30.3734 19.3308 29.8566L18.5028 29.1702L16.0401 30.0501C15.5919 29.4432 15.2175 28.7885 14.9169 28.0995L16.9076 26.3901L16.7362 25.33C16.673 24.9351 16.6387 24.527 16.6387 24.1241C16.6387 23.7186 16.6703 23.3131 16.7362 22.9183L16.9076 21.8582L14.9169 20.1488C15.2148 19.457 15.5919 18.8051 16.0401 18.1982L18.5028 19.0781L19.3308 18.3917C19.9557 17.8749 20.6544 17.4667 21.4059 17.1805L22.4052 16.8015L22.8772 14.2255C23.6181 14.1407 24.3748 14.1407 25.1184 14.2255L25.5903 16.7962L26.5949 17.1752C27.3517 17.4614 28.0557 17.8696 28.6858 18.389L29.5138 19.0728L31.9606 18.2008C32.4089 18.8077 32.7833 19.4624 33.0839 20.1514L31.1143 21.8449L31.2857 22.9024ZM24.0004 19.1947C21.4375 19.1947 19.3598 21.2831 19.3598 23.8591C19.3598 26.4351 21.4375 28.5235 24.0004 28.5235C26.5633 28.5235 28.641 26.4351 28.641 23.8591C28.641 21.2831 26.5633 19.1947 24.0004 19.1947ZM26.0887 25.9581C25.8148 26.2342 25.4893 26.4531 25.1309 26.6023C24.7725 26.7515 24.3883 26.828 24.0004 26.8274C23.212 26.8274 22.4711 26.5173 21.9121 25.9581C21.6374 25.6828 21.4196 25.3556 21.2712 24.9954C21.1228 24.6352 21.0467 24.249 21.0473 23.8591C21.0473 23.0667 21.3558 22.322 21.9121 21.7601C22.4711 21.1983 23.212 20.8908 24.0004 20.8908C24.7888 20.8908 25.5297 21.1983 26.0887 21.7601C26.3634 22.0354 26.5812 22.3626 26.7296 22.7228C26.878 23.083 26.9541 23.4692 26.9535 23.8591C26.9535 24.6515 26.645 25.3962 26.0887 25.9581Z" fill="black"/>
              </svg>
            </Link>
          </Typography>
          <Typography variant="h6" component="div" sx={{ flexGrow: 1 }} align={"center"}>
            <Link to="/ticketsettings" style={{textDecoration:"none",color:"#fff"}}>
              <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="0.5" y="0.5" width="47" height="47.2462" rx="9.5" fill="white" stroke="black" stroke-linejoin="round"/>
                <g clip-path="url(#clip0_57_4)">
                <path d="M25.3926 17.9052L30.0842 22.5937L21.5947 31.0833L16.9061 26.3917L25.3926 17.9052ZM22.2613 32.4302L31.428 23.2635C31.517 23.1769 31.5878 23.0732 31.6361 22.9588C31.6845 22.8443 31.7095 22.7213 31.7095 22.5971C31.7096 22.4728 31.6849 22.3498 31.6367 22.2353C31.5885 22.1208 31.5179 22.017 31.429 21.9302L26.0582 16.5594C25.8786 16.3879 25.6397 16.2922 25.3913 16.2924C25.143 16.2926 24.9042 16.3886 24.7249 16.5604L15.5582 25.7271C15.4692 25.8138 15.3984 25.9174 15.3501 26.0318C15.3017 26.1463 15.2767 26.2693 15.2766 26.3935C15.2766 26.5178 15.3013 26.6408 15.3495 26.7553C15.3977 26.8699 15.4683 26.9736 15.5572 27.0604L20.928 32.4312C21.1076 32.6028 21.3465 32.6984 21.5949 32.6982C21.8432 32.698 22.082 32.602 22.2613 32.4302V32.4302ZM35.452 22.9792L21.9957 36.451C21.6499 36.7906 21.1759 37 20.653 37C20.1301 37 19.6561 36.7906 19.3103 36.451L17.4415 34.5833C17.9633 34.0453 18.2526 33.3237 18.2468 32.5742C18.241 31.8248 17.9407 31.1077 17.4107 30.5778C16.8806 30.0479 16.1634 29.7477 15.414 29.7421C14.6645 29.7365 13.9429 30.026 13.4051 30.5479L13.4061 30.5469L11.5509 28.6781C11.2113 28.3323 11.002 27.8583 11.002 27.3354C11.002 26.8125 11.2113 26.3385 11.5509 25.9927L25.0082 12.549C25.354 12.2094 25.828 12 26.3509 12C26.8738 12 27.3478 12.2094 27.6936 12.549L29.5488 14.4042C29.2742 14.6669 29.0548 14.9819 28.9035 15.3307C28.7522 15.6794 28.6722 16.0548 28.668 16.4349C28.6638 16.815 28.7355 17.1921 28.8791 17.5441C29.0226 17.8961 29.235 18.2159 29.5038 18.4846C29.7725 18.7534 30.0923 18.9658 30.4443 19.1093C30.7963 19.2529 31.1734 19.3246 31.5535 19.3204C31.9336 19.3162 32.309 19.2362 32.6577 19.0849C33.0065 18.9336 33.3215 18.7142 33.5842 18.4396L33.5853 18.4385L35.454 20.2937C35.7936 20.6396 36.003 21.1135 36.003 21.6365C36.003 22.1594 35.7936 22.6333 35.454 22.9792H35.452Z" fill="black"/>
                </g>
                <defs>
                <clipPath id="clip0_57_4">
                <rect width="25" height="25" fill="white" transform="translate(11 12)"/>
                </clipPath>
                </defs>
              </svg>
            </Link>
          </Typography>
          {!token &&
          <Button color="inherit">
            <Link to="/login" style={{textDecoration:"none",color:"#fff"}}>Login</Link>
          </Button>}
        </Toolbar>
      </AppBar>
    </Box>
      }
        <Outlet />
      </>
    );
}